{"version":3,"sources":["../../src/pages/login/login.module.ts","../../src/pages/login/login.ts"],"names":[],"mappings":"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","file":"1.js","sourcesContent":["import { NgModule } from \"@angular/core\";\nimport { IonicPageModule } from \"ionic-angular\";\nimport { LoginPage } from \"./login\";\n\n@NgModule({\n  declarations: [LoginPage],\n  imports: [IonicPageModule.forChild(LoginPage)]\n})\nexport class LoginPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/login.module.ts","import { Component } from \"@angular/core\";\nimport {\n  NavController,\n  AlertController,\n  LoadingController,\n  Loading,\n  IonicPage\n} from \"ionic-angular\";\n\nimport { AuthServiceProvider } from \"../../providers/auth-service/auth-service\";\n\n@IonicPage()\n@Component({\n  selector: \"page-login\",\n  templateUrl: \"login.html\"\n})\nexport class LoginPage {\n  loading: Loading;\n  registerCredentials = {\n    email: '',\n    password: ''\n  };\n\n  constructor(\n    private nav: NavController,\n    private auth: AuthServiceProvider,\n    private alertCtrl: AlertController,\n    private loadingCtrl: LoadingController\n  ) {\n    this.auth.getUserInfo()\n      .then((userDecoded) => {\n        if (userDecoded && userDecoded.userId) {\n          this.nav.setRoot(\"HomePage\");\n        }\n      })\n  }\n\n  public login() {\n    this.showLoading();\n\n    this.auth.login(this.registerCredentials).subscribe(\n      res => {\n        if (res.auth) {\n          this.nav.setRoot(\"HomePage\");\n        } else if (res.msg) {\n          this.showError(res.msg);\n        } else if (res.error.message) {\n          this.showError(`Erro na API: ${res.error.message}`);\n        } else {\n          const parser = new DOMParser();\n          const htmlError = parser.parseFromString(res, 'text/html');\n          const preError = htmlError.getElementsByTagName('pre')[0] ? htmlError.getElementsByTagName('pre')[0].innerHTML : '';\n\n          if (preError.includes('ECONNREFUSED')) {\n            this.showError('Não foi possível conectar com o servidor da API!');\n          }\n        }\n      },\n      err => {\n        this.showError(err);\n      }\n    );\n  }\n\n  showLoading() {\n    this.loading = this.loadingCtrl.create({\n      content: \"Aguarde...\",\n      dismissOnPageChange: true\n    });\n\n    this.loading.present();\n  }\n\n  showError(text) {\n    this.loading.dismiss();\n\n    let alert = this.alertCtrl.create({\n      title: \"Erro\",\n      subTitle: text,\n      buttons: [\"OK\"]\n    });\n\n    alert.present(prompt);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/login.ts"],"sourceRoot":""}